* Tasks
** Design questions
*** DONE should a need with the same name be the same node?
CLOSED: [2016-06-09 Thu 20:07]
e.g. time in my example.
I feel like "yes" is the better answer.
But it's harder to position reasonably.
I'm going with no for now. (2016-06-09)
*** DONE should we have different colors for resources depending on helpfulness?
CLOSED: [2016-06-09 Thu 20:11]
I'm gonna say yes, at least as a nice-to-have.
*** DONE should we have different colors or shapes for different types of nodes?
CLOSED: [2016-06-09 Thu 20:12]
Gonna say no for now, though it shouldn't be hard to add later.
*** TODO think about wizard workflow for an already-existent map
One thing in particular bothers me: on steps with multiple nodes added, the
resume feels weird as-is. Like, say we want to edit the text of a node on the
map, but only with the wizard. How do we get to, say, resource #8? Do we have to
click next on the resource step 7 times, or what?
A potentially better way would be to list all the nodes added in a given step.
The problem with that is screen real-estate.
*** TODO when placing a node, should we only move nodes if (all?) others were placed by wizard?
*** TODO what happens to the wizard at smaller screen resolutions?
Should probably at least say overflow: scroll for the wizard.
** Done before hiatus
*** DONE add all steps to DOM, and show/hide them at each step
CLOSED: [2016-04-05 Tue 21:24]
i.e. don't set innerHTML each time.
This will likely clean up event handling, too.
*** DONE highlight wizard-active node in chart
CLOSED: [2016-03-20 Sun 19:41]
*** DONE statically place first role
CLOSED: [2016-02-28 Sun 15:16]
*** DONE statically place first responsibility
CLOSED: [2016-02-28 Sun 22:05]
*** DONE place other responsibilities, moving earlier ones if necessary
CLOSED: [2016-02-28 Sun 23:21]
*** DONE place needs near their responsibility
CLOSED: [2016-03-20 Sun 19:42]
*** DONE depending on the node uniqueness question (see above), might need to position near two or more parents
CLOSED: [2016-06-09 Thu 20:06]
*** DONE reposition previously placed needs to make room for new one
CLOSED: [2016-03-20 Sun 19:43]
*** DONE similarly, position resources
CLOSED: [2016-03-20 Sun 19:43]
** Essentials
*** DONE close button for wizard (on all steps)
CLOSED: [2016-06-15 Wed 22:01]
*** DONE update text according to Word doc
CLOSED: [2016-06-10 Fri 21:44]
*** DONE functional back button to revise anything
CLOSED: [2016-06-11 Sat 21:26]
*** DONE save wizard-created info on backend
CLOSED: [2016-06-14 Tue 22:38]
This includes whether map was created by the wizard.
Also, which step (and substep) the wizard is currently on, if any.
Should probably auto-save after each substep.
*** DONE when resuming wizard, resume at correct step
CLOSED: [2016-06-15 Wed 21:21]
Also, ideally, populate form data with whatever is currently in the map.
This might not be possible until the list feature is implemented.
*** DONE populate span#wizard_role_text element
CLOSED: [2016-06-11 Sat 21:35]
*** DONE color edges to resources based on helpfulness
CLOSED: [2016-06-15 Wed 22:17]
*** DONE allow backspacing in wizard text inputs and text areas
CLOSED: [2016-06-16 Thu 21:02]
*** DONE deploy (goal: by Fri June 24)
CLOSED: [2016-06-24 Fri 23:26]
** Priorities (from Kristen, June 13)
*** DONE majorly revamp "resources" step
CLOSED: [2016-07-13 Wed 11:02]
**** DONE minimized interstitial step before resources
**** DONE resource data entry step
CLOSED: [2016-07-02 Sat 22:17]
- What type of resource would you like to describe?
  (From a drop-down list with ability to type in something not there.)
- Can you name/describe the resource more specifically?
  (Go from type to specific instance.)
- Please select all needs that you have entered that this resouroce supports.
  (SHOW THEM a list of all needs, organized by responsibility,
  and allow them to select one or more that this resource
  will draw an arrow to -- resource --> need(s).
  The selection can be made with radio buttons/check boxes/highlighting,
  we just want to make it user friendly and abundantly clear
  that you can click to include and then click again to de-select.)
- How helpful has this resource been?
  (radio button or scale with three options - helpful, not helpful neutral)
- Can you describe why you feel the resource is or is not helpful?
  In what ways?
  (free text, does not have to go in the map, but if it did it would go
  on the edge between the resource and need.)
**** DONE Block substep advancement until basic info is entered.
CLOSED: [2016-07-12 Tue 14:32]
**** DONE "another resource or next step?" interstitial
CLOSED: [2016-07-12 Tue 14:32]
This should be a substep to the resource step, Step 8.
Step 8 should not exit until all resources have been added.
**** DONE Save entered data to map and backend
CLOSED: [2016-07-12 Tue 15:08]
- node name should be "resource_type" input
- also save "resource_name", maybe as notes about the node
- add an edge from every need whose box was checked
- color-code edges by `helpfulness` rating (and save that somewhere, if not already saved)
- save "resource_helpfulness_description" text somewhere
**** DONE restore resource entry state upon reload
CLOSED: [2016-07-12 Tue 15:54]
**** DONE insert existing node's data into form
CLOSED: [2016-07-12 Tue 16:24]
**** DONE update node in map
CLOSED: [2016-07-12 Tue 22:09]
**** DONE add line breaks between checkboxes
CLOSED: [2016-07-13 Wed 11:02]
*** TODO add "wishes" step
**** DONE interstitial step before wishes
CLOSED: [2016-07-13 Wed 16:36]
"Ask them to reflect on their emerging map again
and share their top three wishes
for how they could be better supported
in meeting their responsibilities.
Tell them they'll get three wishes
and will be guided through entering each,
one at a time."
**** DONE wish data entry step markup
CLOSED: [2016-07-13 Wed 21:14]
- Please describe your wish.
- Does this wish connect most importantly to
  a responsibility you feel stuck on,
  a need you struggle to meet,
  or a resource that you would like to change in some way?
  (Note: We want to connect your wish to
  the one most important factor in your map.)
- Please select the specific (----) from the list below. (They highlight it.)
If the wish is connected to an existing resource
(question is prompted only if the connection is to a resource)
ask, "Please describe how you would like that resource to change."
(free text, not necessarily included in the map;
if it's in the map it'll go on the edge.)
**** DONE basic step movement (forwards and backwards)
CLOSED: [2016-07-13 Wed 21:41]
**** DONE prevent forward stepping unless required selections made
CLOSED: [2016-07-14 Thu 11:08]
**** DONE fill in span.wish-number dynamically
CLOSED: [2016-07-13 Wed 21:35]
**** DONE fill in span.wish-parent-type dynamically
CLOSED: [2016-07-13 Wed 21:56]
**** DONE fill in div.wish-parent-list dynamically
CLOSED: [2016-07-14 Thu 10:10]
**** DONE clear wish form for new wish entry
CLOSED: [2016-07-14 Thu 10:15]
**** DONE display div.wish-resource-description dynamically
CLOSED: [2016-07-14 Thu 10:11]
**** DONE upon "next", add wish to map and save it to backend
CLOSED: [2016-07-14 Thu 11:08]
Need to save:
- wish_name
- wish_parent (i.e. the edge)
- wish_resource_description
**** DONE fill existing wish data into form
CLOSED: [2016-07-14 Thu 11:42]
**** DONE add completions for wish name
CLOSED: [2016-07-14 Thu 11:53]
**** TODO update existing wishes
*** TODO on final step, allow download as JSON or image
"Show the map, thank them for taking the time to complete it. Allow them to download it as a json file that can be opened in the ssm website or as a picture file (.jpg?). Contact ssm@unc.edu?
*** TODO enable swapping out text copy (3-5 hours)
** Bugs
*** TODO entry-list steps don't save the correct step
So when reloading the page, it reverts to the previous step
This might be because we don't currently save merely for step advancment.
*** TODO datalists in Chrome don't support expanding the list first
In other words, gotta type something before completions fire on that text.
There's a down-arrow that would suggest you can pre-expand, but it doesn't work.
Maybe different markup would make that work?
Maybe something in SSM is interfering with the expansion?
If not, maybe use a polyfill?
** Nice-to-haves
*** DONE display responsibilities as editable list
CLOSED: [2016-06-24 Fri 22:19]
*** DONE edit child nodes of a parent all at once (10 hours)
CLOSED: [2016-06-26 Sun 21:46]
I haven't done this for resources yet, because that step needs to change in
more profound ways anyway.
*** DONE prevent step advancement when data entry incomplete
CLOSED: [2016-06-29 Wed 21:07]
*** DONE foreach responsibility, display needs as editable list
CLOSED: [2016-06-29 Wed 21:21]
*** DONE drop-down completion of common answers at each step
CLOSED: [2016-07-01 Fri 15:46]
Example markup:
<input type="text" placeholder="enter a fruit" list="dl" />
<datalist id="dl"">
  <option value="apple"></option>
  <option value="banana"></option>
  <option value="strawberry"></option>
  <option value="cherry"></option>
  <option value="pear"></option>
  <option value="kiwi"></option>
</datalist>
*** DONE prettify things with better styles
CLOSED: [2016-07-01 Fri 22:02]
One thing I definitely want is for the back and next buttons to show up at the
same place every time.
*** TODO zoom out map when wizard opened, so that the full circles are shown
*** TODO some things drawn wrong when wizard opened
- This includes captions for nodes.
- Probably includes some other things too--worth testing.
- I also ran into some issue with dragging nodes at the bottom (right) of the
screen. Middle click started dragging, left click finished it. But left drag
didn't work.
*** TODO enable text selection in wizard area
** Later
*** TODO enable wizard for maps with preexisting info
This would require some design to figure out how the wizard works with preexisting info.
Would it move nodes that it didn't place?
Would it refuse to operate on maps that weren't well-formed?
(And if so, how would the error show up in the UI?)
This would also need the wizard added to the options menu.
This is specifically out of scope for now, per Kristen.
* Notes from call with Steve and Kristen, Friday, June 10, 2016
** Wizard only applicable if started with blank state
Don't have to handle preexisting maps, at least for now.
However, be sure to allow users to go away and resume the wizard later.
** Nice-to-have feature for resource placement
For each responsibility R_i:
  - get N_i*, the set of all needs under R_i
  - present multiple text inputs for user for new resources
  - for each text input, retain helpfulness radios
  - also add a select box for which need to associate with
No need to implement this yet.
Before I do, open questions include:
- UI might be overfull, with resource text, helpfulness level, associated need,
  and reason, for each resource under a grandparent responsibility...
** Adding wishes
- For now, add a step for wishes.
- Always give exactly 3 options for wishes.
- For each wish, include a text window and a two-level dropdown for what to
  associate with (e.g. "resource" -> "babysitting").
- Also include an optional text area for why this is here.
** We'll call again Monday to discuss priorities
