* Wizard libraries
** Contenders
Both of these are pretty mature and fully featured.
*** Zurb Foundation Joyride [[http://zurb.com/playground/jquery-joyride-feature-tour-plugin][demo/blog post]] - [[https://github.com/zurb/joyride][Github]]
*** Bootstrap Tour [[http://bootstraptour.com/][link]]
** Meh
*** jQuery Simple Tour [[http://alvaroveliz.github.io/aSimpleTour/][website]] - [[https://github.com/alvaroveliz/aSimpleTour][Github]]
Interesting separation between the remote control (with next/prev buttons) and the highlighter/pointer.
Seems a little buggy, maybe not quite mature.
Evidence:
- go forward up to the "Data" section. Then go back. Doesn't switch immediately back to prev section, even though pointer changes.
- also, go forward until remote goes to the bottom. Hitting previous doesn't bring it back to top.
*** jQuery TourBus [[http://ryanfunduk.com/jquery-tourbus/][website]] - [[https://github.com/rfunduk/jquery-tourbus][Github]]
Seems a little odd, possibly immature.
** Nah
*** Pageguide.js [[http://tracelytics.github.io/pageguide/][website]] - [[https://github.com/tracelytics/pageguide][Github]]
seems to overlay stuff on top of actual document, hindering functionality
*** jQuery Website Tour [[http://tympanus.net/codrops/2010/12/21/website-tour/][website]] - [[http://tympanus.net/Development/WebsiteTour/][demo]]
same weakness as Pageguide.js
*** Boostro.js [[http://clu3.github.io/bootstro.js/][website]] - [[http://github.com/clu3/bootstro.js][Github]]
ditto about overlay
*** Trip.js [[http://eragonj.github.io/Trip.js/][website]] - [[https://github.com/EragonJ/Trip.js][Github]]
meh about aesthetics, plus seems oriented towards auto-advancing (though not exclusively)
*** Crumble [[http://blog.tommoor.com/crumble/][website]] - [[https://github.com/tommoor/crumble][Github]]
ambivalent. unusual aesthetic/UX. but circle-oriented, which kinda fits. No
next/prev buttons. And actually, a "prev" button is probably pretty important.
*** Intro.js [[http://usablica.github.io/intro.js/][website]] - [[https://github.com/usablica/intro.js][Github]]
Overlay
** Decision: Bootstrap Tour
Rationale: Joyride seems great, but it seems more oriented to a relatively
static set of steps decided in the document. Bootstrap is all JS-oriented, and
my guess is that it will be more friendly for SSM (a pure-JS app) and dynamic
steps.
* Description of phase 3 work
** from Steve, in [[https://mail.google.com/mail/u/0/#search/from%3Astevec%40renci.org+wizard/150ecdcb03a3373c][this email]]:
There may be some additional work for you.
Kristen would like to build an SSM "wizard":
an online tool that not only lets you build ssms,
but takes you step by step through the process of building them
and actually does the construction automatically.
For example, it starts with an explanation,
then asks the user what role or roles she wants to have in the middle of the ssm.
The user types in the role[s],
and the software then displays an ssm with that role (or those roles)
in the proper location (the center of the ssm).
Then the user is asked what the primary responsibilities are
in support of that role (those roles).
The user types them in
and they're displayed as nodes in an ssm,
in the second ring,
connected by edges to the role[s].
Then again for the next ring: needs. 

She'd like this hand-holding software to work for just the first three levels:
roles, responsibilities, needs.
The user types in the info in response to prompts,
and the software builds the map.

I've attached a script that Kristen uses to construct ssms
out of paper and post-it notes:
she'd like something similar,
except entirely online.
** Script (in attachment)
Script: System support mapping using Paper
*** Context
Used when it is important to understand the role, responsibilities, needs, resources, and 
wishes of individual participants navigating and/or supporting a system. This tool has 
been particularly useful in the context of care coordination or coaching. It is also useful 
when studying a fragmented system in which many stakeholders shape outcomes.
*** Purpose
Used in order to elicit the role an individual plays in a system, their responsibilities or 
objectives/goals, needs for meeting each, resources used to support needs (and notes on 
whether they were helpful and why/why not), and wishes for being better supported in 
the system.
*** Status
Experimental
*** Primary nature of group task
Divergent – we are attempting to understand each individual’s experience in and/or 
shaping the system being studied. 
*** Time
- Preparation time: No preparation time needed
- Time to walk through activity: 60 to 80 minutes
- Follow-up time: No follow-up time needed (unless you want to turn maps into electronic 
files for data analysis or update the maps over time)
*** Materials needed
Post-it notes (ideally purple, blue, aqua, yellow and gold), paper, thin sharpies (black, 
red, and green), and wall/size post-its or butcher block paper and blue painters tape
*** Inputs
Nothing. However, if this script is being used in a meeting with stakeholders supporting a 
system, it is very helpful to have 1-3 consumers prepare system support maps ahead of 
time so that they can raise awareness of what it’s like to experience the system as well as 
to familiarize participants with the structure of system support maps.
*** Outputs
Completed system support map
*** Roles
- A guide to lead participant through system support mapping process and answer 
questions
- For large groups, it is helpful to have multiple facilitators circulating to answer 
questions and ensure maps are being completed as intended
- A participant/stakeholder (or someone who speaks for the person that the system 
support map is being filled out for, as appropriate) 
*** Steps
**** 1. foundations: clarity about system
It is critical that this exercise begin with a clear boundary around the system being 
studied. Examples of systems that have been studied using this tool include:

- a. Supporting a child/children with special health care needs and/or 
     developmental disabilities;
- b. Above, but in a specific life-course (i.e., transition to adulthood);
- c. Family outcomes in the 3 months post-partum;
- d. The social-emotional health of a child/children;
- e. Migraine self-management;
- f. Community-academic partnerships working to improve population health;
- g. Efforts to address isolation among individuals in a community;
- h. Efforts to increase inter-generational cohesion in a community;
- i. And, efforts to reconnect with one’s landscape/environment.

If the system under study is not clear, this exercise will be unclear and potentially 
overwhelming. It is very important to emphasize the focus on this system, or 
else individuals will have a hard time limiting/focusing on their responsibilities. 
This step may require conversation and consensus-building. It’s a good time to 
establish shared definitions of the system.
**** 2. introduction
Guide: “This exercise will walk you through reflecting on and documenting 
(diagrammatically), your role in the system under study, your 
responsibilities/objectives/goals (choose the most appropriate term), and what 
supports you in meeting these responsibilities/objectives/goals. This exercise will 
require you to really think about your priorities and what supports you, what 
doesn’t, and what you need. We will ask you to talk through your map, so keep 
that in mind as you write.” 
**** 3. a note about process
The planning team should decide if it is best to walk participants through the 
exercise step by step, or to present the overall process and then let them work at 
their own pace. While it is far more complex to present the whole process, it can 
be better with a large group as participants often spend more/less time on different 
steps and re-convening the group for each step can be challenging. If the whole 
process is going to be shared at once, it is preferable to illustrate the map first 
with a participant (often the consumer in the system under study) telling their 
story through their completed map. This familiarizes others with the task, and also 
illustrates the power/value of storytelling with a map. Either way, the steps to 
complete a map are as follows:
**** 4. draw 4 concentric circles
Each participant should be given a large sheet of paper, a sharpie, post-it notes 
and enough space to work (on a table or a wall). They should be asked to draw 4 
concentric circles with the marker, each large enough for a post-it note (inner 
circle) or ring of post-it notes (all other rings). You should create an example map 
to show them. If time permits, it’s helpful to pre-draw the rings for participants.
**** 5. identify role of self within system
Ask the patient to identify their role in the system under study. Repeat the agreed 
upon description of the system to reinforce the focus. If multiple systems are 
being studied at once, we recommend working through one at a time, completely. 

a. Guide: What role do you play in this system? Are you a patient, a family 
member, a teacher, an organizational leader, a legislator, a community 
member, etc? (Guide should fill in examples relevant to the system being 
studied.)

b. When they identify their role, ask them to write it on a purple post-it note, 
and place it in the innermost circle (in the center of the map).
**** 6. clarify own role
Ask the participant to think about whether they want to describe any context or 
clarify their role in any way. For example, they might describe the kind of 
organization they lead, another role that complicates this one, or the context in 
which they practice primary care. 

a. Guide: Now further clarify your stakeholder role by providing any context 
that will help others understand your unique situation. For example, if you 
are a provider, what is your specialty and what kind of patients do you 
typically see (i.e., uninsured patients in a primary care community health 
center)? If you are a parent, what shapes your experience (i.e., describe 
your child or your community).

b. This information should be written on a second purple post-it note and 
slipped under their role (make sure it’s partially visible so we know it’s 
there)!

c. Note that participants who feel uncomfortable defining their role only in 
relation to the system under study should feel encouraged to document 
additional/broader roles here (e.g., “I am a mother of 2 other children in 
addition to the one with special health care needs; I am also a wife, a 
person of faith, and a person with a career.”)
**** 7. describe responsibilities/objectives/goals in the system
Ask the participant to describe their responsibilities/objectives/goals in the system 
being studied. Write one per post-it note. 

a. Guide: “In your role in ____ (fill in the system being studied), what do 
you see as the main activities you are responsible for/objectives you are 
working toward/goals? Identify the 4-8 most important responsibilities, 
and write one per post-it notes.”

b. Ask them to make a list of the 4-8 (or a reasonable number given the 
project at hand) most pressing responsibilities that come to mind. Write 
each responsibility on a separate blue post-it note, and spread these around 
the second ring (the one surrounding their role). Review the list together 
and encourage them to reflect on what is missing from it. 

c. Next, ask them to draw arrows from their role to each responsibility it 
creates for them. 
**** 8. identify needs for meeting responsibilities/objectives/goals
Ask the patient to identify what they need, in general terms, to meet each 
responsibility/objective/goal.

a. Guide: Next, we want you to consider each responsibility, one at a time, 
and identify what you need – in general terms – to get it done. Think about 
this as a recipe. To meet a given responsibility/objective/goal, what 
ingredients would you need? Common responses include time, money, 
reimbursement, buy-in from my organization, information, access to ____, 
etc. Please be creative here – it really helps if this list is complete. Also 
consider internal needs – like patience, empathy, energy, creativity, etc. 
Here is an example for a parent/caregiver of a child with special health 
care needs supporting the physical health of their child: a doctor who 
“gets” us (my daughter and our family) and who is open in the evenings 
or weekends, child care for my other kids, transportation, and money for 
the copayment).

b. Instruct participants to write each need on a separate aqua post-it note, and 
stick them in the ring surrounding responsibilities/objectives/goals – close 
to the item generating the need.

c. They should then draw arrows that link each responsibility to the needs it 
generates. Repeat for each responsibility. If a need repeats, you can draw 
multiple arrows to the single post-it, or duplicate the post-it (to keep your 
system support map cleaner). It’s ok to duplicate – needs repeat (flour is 
an important ingredient when cooking; time is an important need for 
getting many things done)! 
**** 9. identify specific resources that have been tried
Ask the participant to identify specific resources that they have tried in the past 
(decide on a unit of time – ever, year, month, week, etc).

a. Guide: The next step is to think about the needs you listed. Are there any 
specific resources that you have tried (whether or not they have helped 
you) to get that need met? What supports you? If needs were ingredients 
in a recipe, resources might include things like a favorite recipe, 
particular brands of an ingredient, a store that sells many ingredients on 
your list, etc. Back to system support maps, resources might include 
websites, information/brochures, training programs/classes, organizations 
in your community, providers, books you read to build a skill in yourself 
(e.g., communication skills, mindfulness, the ability to relax). Here we also 
want to know about your experience with each resource. Did it help you? 
Why or why not – what about the resource worked/didn’t work?

b. Write each resource on a separate yellow post-it note, and place it in the 
ring surrounding needs, close to the need(s) it targeted.

c. Put a green, black, or red star on the post-it to indicate whether the 
resource helped, was neutral (or in the middle), or did not help/support 
you, respectively. If you can, make a note in that color of marker 
explaining.

d. Please draw an arrow from each resource to the corresponding need they 
targeted. 

e. Note that some participants might be concerned about judging the 
usefulness of a service based on their own experience. Remind them that 
this map is meant to reflect only their own experiences, and would never 
be used on its own to evaluate services. It will be used as one piece of the 
overall picture.
**** 10. a note about order of process
NOTE: A good order is to fill in role/context and responsibilities first. Then, ask
the participant to rank their priorities in terms of importance or time spent on each 
(the team should decide and ask participants to rank consistently). They might put 
number in the corner of each responsibility post-it. Then, ask them to work 
through the responsibilities in their rank order. For each one, push out in the 
diagram – fill in needs and resources. Work through all the responsibilities before 
moving to the next step.
**** 11. reflection
Ask participants to reflect on their whole map. Are arrows drawn? Is anything 
missing?
**** 12. add wishes
Ask them to add their wishes

a. Guide: In the area outside the resources ring, we now want you to add 
your top three wishes for what would most help you meet your 
responsibilities/objectives/goals.”

b. Ask the patient to reflect on what they are trying to do, what they need, 
and resources they have tried. What would most help them meet their 
responsibilities? How could the system better support them? Are there any 
responsibilities they just can’t begin to get their head around that they’d 
like help with? Is there a need not currently met? Do they wish a current 
resource was different in some way? 

c. Write one wish on each of three gold post-it notes. Draw an arrow from 
the post-it note to whatever the wish targets in their map.
*** Evaluation criteria:
 Participants complete a system support map
 Participants are primed to share their responsibilities/objectives/goals, what they 
need, resources they have tried (and how they helped) and their top 3 wishes
 Participants feel this exercise has helped them think about what they are trying to 
do within the system, and how well the system supports them
*** Authors:
Kristen Hassmiller-Lich
Steve Chall
Seri Link
Ruchir Karmali
*** History:
Adapted from “Gabe’s Map”: http://www.huffingtonpost.com/2013/01/18/gabes-care-
map-special-needs-children-caregivers_n_2469564.html
AND
http://www.childrenshospital.org/care-coordination-curriculum/care-mapping. Also 
inspired by ecomaps typically done in social work. The goal was to capture more 
information about system supports and guide improvement.
*** Revisions:
No revisions
*** References:
*** Notes:
* Wizard script
** 1. Introduction
<h1>Welcome to the SSM wizard</h1>
<p>Hi, I&rsquo;m the SSM wizard. I&rsquo;m here to help. I will guide you through the process of creating a system support map. When you answer my questions, I will create your map for you.</p>
<p>What is a system support map, you ask? It&rsquo;s a way of visualizing a system of support. For example, a map for a parent of a special needs child would include their responsibilities for their child, the needs they have to fulfill those responsibilities, and the resources that help them meet those needs.</p>
<p>Note: it can take a while to create a map, even with my help! You should expect to take between 30 and 60 minutes for this. If you need to take a break, you can save your work and come back to it later.</p>
<p>Sound complicated? Don&rsquo;t worry. I&rsquo;ll guide you through the process, step by step.</p>
<p>Hit the &ldquo;Next&rdquo; button to continue.</p>
** 2. Prerequisites
<h1>Prerequisites</h1>
<p>Before we begin, you should have a clear idea of the system you want to describe.</p>
<p>This is important! If you don&rsquo;t have a solid understanding of the system, this exercise will most likely be unclear, unhelpful, overwhelming, and even frustrating.</p>
<p>If you have multiple roles that you want to study, pick one. Each map is for one role, and one role only. You can come back and fill out other maps for other roles later, if you want.</p>
<p>If you need inspiration, check the sidebar for some examples of systems mapped by people.</p>
<p>Hit the &ldquo;Next&rdquo; button to continue.</p>
<aside>
  <h3>Examples of systems mapped by SSM</h3>
  <ul>
    <li>Supporting a child/children with special health care needs and/or developmental disabilities;</li>
    <li>Above, but in a specific life-course (i.e., transition to adulthood);</li>
    <li>Family outcomes in the 3 months post-partum;</li>
    <li>The social-emotional health of a child/children;</li>
    <li>Migraine self-management;</li>
    <li>Community-academic partnerships working to improve population health;</li>
    <li>Efforts to address isolation among individuals in a community;</li>
    <li>Efforts to increase inter-generational cohesion in a community;</li>
    <li>And, efforts to reconnect with one’s landscape/environment.</li>
  </ul>
</aside>
** 3. Overview
<h1>Overview</h1>
<p>What will we be doing? Here&rsquo;s a quick overview of the process.</p>
<p>Take a look at the chart below. Notice the concentric rings, and the labels for each ring.</p>
<p>We&rsquo; going to be building your system support map step-by-step, starting at the innermost ring and working our way outwards.</p>
<p>Intimidated by the complicated-looking controls at the bottom left? Don&rsquo;t worry. You don&rsquo;t have to know anything about them. Those controls are for advanced users who want to create their map themselves. You won&rsquo;t need to use them if you stick with me.</p>
<p>Hit the &ldquo;Next&rdquo; button to continue.</p>
** 4. Role
<h1>Identifying your role</h1>
<p>What role do you play in this system? Are you a patient, a family member, a teacher, an organizational leader, a legislator, a community member, or what?</p>
<p>Remember, each map is intended to describe one role. If you have multiple roles you would like to map, please pick one. You can study the other ones later, after you finish the map for this one. I&rsquo;ll be ready for you.</p>
<label>My role is:
  <input type="text" name="role" />
</label>
<p>When you hit &ldquo;Next&rdquo;, pay attention to the chart below. I will create your role in the chart for you. You&rsquo;re welcome.</p>
<p>Hit the &ldquo;Next&rdquo; button to continue.</p>
** [4.5. Adding context or clarification to your role
(I think I will skip this step, since it doesn't produce any output on the map.)
<h1>Adding context to your role</h1>
<p>Some folks find it useful to give some context for their role. For example, they might describe the kind of organization they lead, or they might explain another role that complicates this one, or they might provide the context in which they practice primary care.</p>
...]
** 5. Responsibilities
<h1>Responsibilities</h1>
<p>Now let&rsquo;s look at the second ring, which will contain the responsibilities that you have in this role.</p>
<p>So, in your role as <span id="wizard_role_text">_____</span>, what do you see as your main responsibilities? Identify the most important 4&ndash;8 responsibilities, and add them here.</p>
<p>When you click the &ldquo;Add&rdquo; button below, I will add it to the chart below. Then you can add another responsibility, or click the &ldquo;Next&rdquo; button to go to the next step.</p>
<label>I have a responsibility to:
  <input type="text" />
</label>
<button>Add</button>
<button>Next</button>
<aside>Pro-tip: some people find it useful to describe objectives or goals instead of responsibilities in the second ring. You can do that if you want. Just remember that you did, so that you&rsquo;re not confused when I talk about responsibilities in the next steps!</p>
** 6. For each responsibility, identify needs
<h1>Needs</h1>
<p>The third ring is for needs. What do you need to meet each responsibility? Think about this as a recipe. To meet one of these responsibilities, what ingredients would you need? Common responses include time, money, reimbursement, buy-in from my organization, information, etc. Please be creative here! It helps if this list is complete. Also consider internal needs, like patience, empathy, energy, creativity, etc.</p>
<p>Note that these should be general needs. I don&rsquo;t need to know that you need to do laundry tomorrow!</p>
<p>Here is an example for a parent of a child with special health care needs supporting the physical health of their child: a doctor who &ldquo;gets&rdquo; us (my daughter and our family) and who is open in the evenings or weekends, child care for my other kids, transportation, and money for the copayment.</p>
<p>I&rsquo;ll ask about each responsibility in turn, starting with the first one you told me about.</p>
<h3>Responsibility <span id="wizard_current_responsibility_number">_</span> of <span id="wizard_responsibility_count">_</span>: <span id="wizard_current_responsibility_text">____</span></h3>
<label>To fulfill this responsibility, I need:
  <input type="text" />
</label>
# rinse and repeat for each responsibility
** 7. For each need, identify resources
<h1>Resources</h1>
<p>The next step is to think about the needs you listed. Are there any specific resources that you have tried (whether or not they have helped you) to get that need met? What supports you? If needs were ingredients in a recipe, resources might include things like a favorite recipe, particular brands of an ingredient, a store that sells many ingredients on your list, etc. Resources for your map might include websites, brochures, training programs and classes, organizations in your community, providers, books you read to build a skill in yourself (e.g., communication skills, mindfulness, the ability to relax).</p>
<p>I also want to know about your experience with each resource. Did it help you? Why or why not&mdash;what about the resource worked or didn’t work? I will color-code your resources based on their helpfulness to you.</p>
<p>I&rsquo;ll ask about each need in turn, starting with the first one you told me about.</p>
<h3>Need <span id="wizard_current_need_number">_</span> of <span id="wizard_need_count">_</span>: <span id="wizard_current_need_text">____</span></h3>
<label>A resources that will help meet this need is:
  <input type="text" />
</label>
# rinse and repeat for each need
** 8. Review
<h1>Review</h1>
<p>We&rsquo;re done! When you click the &ldquo;Finish&rdquo; button, I&rsquo;ll go away and let you view or print your fancy new map.</p>
<p>If you&rsquo;re feeling ambitious, you can try to add wishes on the outside of the rings, connecting them with whatever makes sense.</p>
<p>If you ever want to see me again, even for a map that you&rsquo;ve already finished, you can! Just click on the "Options" menu in the toolbox.</p>
<button>Finish</button>
* Tasks
** Design questions
*** DONE should a need with the same name be the same node?
CLOSED: [2016-06-09 Thu 20:07]
e.g. time in my example.
I feel like "yes" is the better answer.
But it's harder to position reasonably.
I'm going with no for now. (2016-06-09)
*** DONE should we have different colors for resources depending on helpfulness?
CLOSED: [2016-06-09 Thu 20:11]
I'm gonna say yes, at least as a nice-to-have.
*** DONE should we have different colors or shapes for different types of nodes?
CLOSED: [2016-06-09 Thu 20:12]
Gonna say no for now, though it shouldn't be hard to add later.
*** TODO think about wizard workflow for an already-existent map
One thing in particular bothers me: on steps with multiple nodes added, the
resume feels weird as-is. Like, say we want to edit the text of a node on the
map, but only with the wizard. How do we get to, say, resource #8? Do we have to
click next on the resource step 7 times, or what?
A potentially better way would be to list all the nodes added in a given step.
The problem with that is screen real-estate.
*** TODO when placing a node, should we only move nodes if (all?) others were placed by wizard?
*** TODO what happens to the wizard at smaller screen resolutions?
Should probably at least say overflow: scroll for the wizard.
** Done before hiatus
*** DONE add all steps to DOM, and show/hide them at each step
CLOSED: [2016-04-05 Tue 21:24]
i.e. don't set innerHTML each time.
This will likely clean up event handling, too.
*** DONE highlight wizard-active node in chart
CLOSED: [2016-03-20 Sun 19:41]
*** DONE statically place first role
CLOSED: [2016-02-28 Sun 15:16]
*** DONE statically place first responsibility
CLOSED: [2016-02-28 Sun 22:05]
*** DONE place other responsibilities, moving earlier ones if necessary
CLOSED: [2016-02-28 Sun 23:21]
*** DONE place needs near their responsibility
CLOSED: [2016-03-20 Sun 19:42]
*** DONE depending on the node uniqueness question (see above), might need to position near two or more parents
CLOSED: [2016-06-09 Thu 20:06]
*** DONE reposition previously placed needs to make room for new one
CLOSED: [2016-03-20 Sun 19:43]
*** DONE similarly, position resources
CLOSED: [2016-03-20 Sun 19:43]
** Essentials
*** TODO close button for wizard (on all steps)
*** TODO update text according to Word doc
*** TODO functional back button to revise anything
Probably best to just do an actual state machine and be done with it.
*** TODO save wizard-created info on backend
This includes whether map was created by the wizard.
*** TODO deploy
** Nice-to-haves
*** TODO enable wizard for maps with preexisting info
This would require some design to figure out how the wizard works with preexisting info.
Would it move nodes that it didn't place?
Would it refuse to operate on maps that weren't well-formed?
(And if so, how would the error show up in the UI?)
This would also need the wizard added to the options menu.
*** TODO prettify things with better styles
One thing I definitely want is for the back and next buttons to show up at the
same place every time.
*** TODO zoom out map when wizard opened, so that the full circles are shown
*** TODO some things drawn wrong when wizard opened
- This includes captions for nodes.
- Probably includes some other things too--worth testing.
- I also ran into some issue with dragging nodes at the bottom (right) of the
screen. Middle click started dragging, left click finished it. But left drag
didn't work.
*** TODO wizard and toolbox collide if window small enough
See screenshot.
*** TODO color resources based on helpfulness
*** TODO edit child nodes of a parent all at once (10 hours)
*** TODO enable swapping out of text (3-5 hours)
*** TODO drop-down completion of common answers at each step
* Force-balancing thoughts, Sun Mar 27
Three forces that we need to balance:
1. decollision against rings
2. decollision against nodes
3. attraction to parent and children

I'm running into problems getting all of these to balance appropriately.
Balancing 1 and 2 is possible, I just would rather not do it.
It involves solving the quadratic equation and some fiddly bits.
But the real problem is in balancing decollision forces with attractive forces.
These seem to be a little different in nature.
Decollision forces should bump nodes away from a collision.
I've even been setting the position to be exactly what it should be.
But that's problematic because I don't know how to balance it with attraction.

Maybe what I could do is make decollision forces affect the previous position.
The futher past the collision point we are,
the farther beyond it we move the previous position.
The attractive force moves a bounded distance towards the attraction point.
If we move a bounded distance,
that limits how far beyond a collision we can be on the next step.

In fact, if we do the decollision force that way,
I think that would avoid the problem of balancing the two decollision forces.
If the node collided with both a ring and another node,
each one would move the previous position in a certain direction.
But there's no reason why both couldn't move the previous position.
This would (maybe) be a natural movement away from both collisions.

Let's try it and see what happens.
* Layout thoughts, Sat Apr 2
** Abandoning force-layout
The force layout approach really isn't working out.
I think that the approach just isn't a good fit for this problem.
I'm still in search of the fundamental reason why,
but I think it has something to do with one or more of:
- collisions are hard to cast as forces
- if they're not forces (e.g. static placement outside of collision),
  then they are difficult to reconcile with other forces.
- this problem is strongly region-based,
  which seems to be an uncommon constraint on force layouts.
** Basis for alternative layout: polar coordinates
Let's agree to hold the radius constant for a given node type.
The lone variable, then, for each node, is "what's my theta?"
This simplifies the problem greatly.
The downside?
We have nowhere to go if there are too many nodes to fit into a ring.
We can mitigate this by simply overlapping.
Ideally, we could spread nodes around within the ring,
putting some closer and some farther from the center.
But getting this right without force layout would be really tricky.
And getting it right _with_ force layout is also tricky.
So we will need to support the degenerate case:
if there are too many nodes to fit in a ring,
give them equally spaced thetas and let them overlap.
(Alternate idea: make overlaps ~equal, so that biggest nodes take more room.)
** Simple approach: equal spacing for all rings
I already use this approach for the responsibilities.
We could space other nodes equally in all further rings.
This allows for _skew_:
where a significantly different number of edges
point clockwise vs. counterclockwise.
But that's not a terrible thing.
** Better approach: balanced spacing
This approach avoids skew.
Major concept: a sibling group, i.e. all the children of a single parent.
*** Case 1: enough space for all nodes in all rings
If a sibling group has no children,
- "link arms", i.e. remove any space between them
- place the group such that the midpoint-theta is equal to parent's theta
- if that's not possible, place them as close to that as possible,
  and move the parent to the midpoint-theta if possible.
- in some cases, might need to ask a neighboring cousin group to move over and make room,
  and that might need to happen recursively.
  When it does happen, remember to move parents accordingly, if possible.
- At some point, we'll be out of room and need to bump to case 2.
If a sibling group has children, not really sure, but I think they're not really
a "group" anymore and don't move together.
*** Case 2: not enough space; we'll consider this later
- Just place nodes at equal spacing, and move parent nodes to their spots (if possible).
** Conclusion
Let's go with the simplest approach for now.
If we have time, we'll do the balanced approach.
